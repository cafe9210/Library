<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>책 상세 페이지</title>
</head>

<body>
	<!-- header.html -->
	<header th:replace="fragments/header::headerFragment"></header>

	<div>
		<div><img alt="책사진" th:src="${bDetails.image}"></div>
		<div>책 제목 :   <span th:text="${bDetails.b_title}"></span></div>
		<div>작가 :     <span th:text="${bDetails.b_author}"></span></div>
		<div>장르 :     <span th:text="${bDetails.c_name}"></span></div>
		<div>출판사 :   <span th:text="${bDetails.b_publisher}"></span> </div>
		<div>출간 날짜 : <span th:text="${bDetails.b_pdate}"></span> </div> 
	</div>
	
	<div class="tb_col">
		<div>
			<div>ID</div>
			<div>ISBN</div>
			<div>대여</div>
		</div>
		<div th:each="bList : ${bList}">
			<div th:text="${bList.b_id}"></div>
			<div th:text="${bList.isbn}"></div>
			<div th:text="${bList.b_status} == 0 ? 불가 : 가능"></div>
			<form th:action="@{book/rental}" method="POST" onsubmit="return formCheck()">
                    <div th:if="${member.m_id} != null">
                        <input type="hidden" name="m_id" th:value="${member.m_id}">
						<input type="hidden" name="b_status" th:value="${bList.b_status}">
						<input type="hidden" name="b_id" th:value="${bList.b_id}">
						<input type="hidden" name="isbn" th:value="${bList.isbn}">
						<input type="submit" value="알림" onclick="notification()">
						<div th:if="${bList.b_status} != 0">
								<input type="submit" onclick="rentalBook()" value="대출">
						</div>
					</div>
			</form>
		</div>
	</div>
	

</body>
<script>
	function notification() {
	    console.log('rental extention btn click event');
	    if(confirm('책 대여 기간을 연장 하겠습니까?') == true){
	        location.href = '/book/rental/extension';
	    }else{
	        return false;
	    }
	    // location.href = '/book/rental/extension';
	}
	function rentalBook() {
		function formCheck(){
			console.log(111)
		}
	    alert("책 대출이 완료 되었습니다.");
	    // location.href = '/book/rental/extension';
	}
</script>
</html>